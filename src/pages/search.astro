
---
import AppLayout from "@/layouts/AppLayout.astro";
import SearchPage from "@/components/search/SearchPage.vue";
import { createAuth } from "@/lib/auth";

const env = Astro.locals.runtime?.env || import.meta.env;
const auth = createAuth(env);
const session = await auth.api.getSession({ headers: Astro.request.headers });

// Optional: Redirect if not logged in, or allow public search? 
// The app seems to require login for most parts.
if (!session) {
    return Astro.redirect("/login");
}
---

<AppLayout>
    <main class="min-h-screen pb-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <SearchPage client:load />
        </div>
    </main>
</AppLayout>
