---
import AppLayout from "@/layouts/AppLayout.astro";
import ProfileForm from "@/components/profile/ProfileForm.vue";
import TraktConnection from "@/components/settings/TraktConnection.vue";

const { user } = Astro.locals;

if (!user) {
    return Astro.redirect("/login");
}
---

<AppLayout>
    <div class="container max-w-2xl py-10">
        <div class="space-y-6">
            <div>
                <h3 class="text-lg font-medium">Profile</h3>
                <p class="text-sm text-muted-foreground">
                    Manage your personal information.
                </p>
            </div>
            <div class="h-px bg-border"></div>
            <ProfileForm client:load />
            <div class="h-px bg-border"></div>
            <div class="space-y-4">
                <div>
                    <h4 class="text-base font-medium">Connected Accounts</h4>
                    <p class="text-sm text-muted-foreground">
                        Manage integrations connected to your TraktDB profile.
                    </p>
                </div>
                <TraktConnection client:load />
            </div>
        </div>
    </div>
</AppLayout>
