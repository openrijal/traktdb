---
import AppLayout from "@/layouts/AppLayout.astro";
import FriendsDashboard from "@/components/friends/FriendsDashboard.vue";
import { createAuth } from "@/lib/auth";

const env = Astro.locals.runtime?.env || import.meta.env;
const auth = createAuth(env);
const session = await auth.api.getSession({ headers: Astro.request.headers });

if (!session) {
    return Astro.redirect("/login");
}
---

<AppLayout>
    <main class="container py-6">
        <header class="mb-6">
            <h1 class="text-3xl font-bold tracking-tight">Friends</h1>
        </header>

        <FriendsDashboard client:load />
    </main>
</AppLayout>
