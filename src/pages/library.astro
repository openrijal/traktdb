
---
import { createAuth } from "@/lib/auth";

const env = Astro.locals.runtime?.env || import.meta.env;
const auth = createAuth(env);

const session = await auth.api.getSession({ headers: Astro.request.headers });
if (!session) {
    return Astro.redirect("/login");
}

return Astro.redirect("/library/movies");
---
